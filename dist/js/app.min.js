/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.guid = guid;
exports.randomHex = randomHex;
exports.getDistance = getDistance;
exports.isNull = isNull;
exports.coordsAreNull = coordsAreNull;
function guid() {
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
    }
    // return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
    return "" + s4() + s4() + "-" + s4() + "-" + s4() + "-" + s4() + "-" + s4() + s4() + s4();
}

function randomHex() {
    return '#' + Math.floor(Math.random() * 16777215).toString(16);
}

function getDistance(coords1, coords2) {
    return Math.sqrt(Math.pow(coords1.x - coords2.x, 2) + Math.pow(coords1.y - coords2.y, 2));
}

function isNull(value) {
    return value === null;
}

function coordsAreNull(obj) {
    return isNull(obj.x) && isNull(obj.y);
}

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* globals console */

// import './rAF-polyfill.js';

var _state = __webpack_require__(2);

var _state2 = _interopRequireDefault(_state);

var _canvasSetup = __webpack_require__(3);

var _canvasSetup2 = _interopRequireDefault(_canvasSetup);

var _addUser = __webpack_require__(7);

var _addUser2 = _interopRequireDefault(_addUser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// let renderer;
var app = {
    state: _state2.default

    // draw() {
    // let time;
    // let controls = document.getElementById('controls');
    // time = new Date();
    // controls.innerText = `${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}.${time.getMilliseconds()}`;

    // // this.renderer.clear();
    // if (this.state.nodes.length) {
    //     this.state.nodes.forEach(node => {
    //         // check if node.userID matches userID
    //         // if so, use coords for circle; get node color from state.user[userID].color
    //     })
    // }
    // },
};

Promise.resolve(app).then(_addUser2.default).then(_canvasSetup2.default)
// .then(() => animate())
.then(function () {
    return console.log("state", _state2.default);
}).catch(function (thrown) {
    return console.error('%cAn error occurred:', 'font-weight:bold', thrown);
});

// function animate() {
//     app.draw();
//     requestAnimationFrame(animate);
// }
function output(str) {
    document.getElementById('output').innerHTML += '<br>' + str;
}
window.getState = function () {
    return console.log('app.state', app.state);
};
/*
TODO: get touch-add working
-- create node using user's color
-- save node info to nodes array
TODO: share state over websockets
TODO: update state object when socket info comes in
 */

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// The Truth!

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = {
    nodes: [],
    connections: [],
    users: {},
    currentUser: {
        userID: '',
        color: ''
    }
};

/*
e.g. 
{
    nodes: [{
        userID: 'guid',
        coords: [{ x:0, y:0 }],
        nodeID: 'guid'
    }],
    connections: [{
        e1: { x:0, y:0 },
        e2: { x:0, y:0 },
    }],
    users: {
        guid: {
            color: ''
        }
    }
}
 */

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/*  */

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = canvasSetup;

var _spawnNode = __webpack_require__(4);

var _spawnNode2 = _interopRequireDefault(_spawnNode);

var _findNearestNodes = __webpack_require__(5);

var _findNearestNodes2 = _interopRequireDefault(_findNearestNodes);

var _drawLine = __webpack_require__(6);

var _drawLine2 = _interopRequireDefault(_drawLine);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var canvas = void 0;function canvasSetup(app) {
    var nearestNodes = new _findNearestNodes2.default(app);
    canvas = new fabric.Canvas('stage');

    fabric.Group.prototype.hasControls = false;
    canvas.selection = false;

    window.addEventListener('resize', resizeCanvas, false);
    resizeCanvas();
    app.resizeCanvas = resizeCanvas;
    app.canvas = canvas;

    canvas.on({
        'mouse:down': function mouseDown(event) {
            var node = (0, _spawnNode2.default)(app, event);
            if (node) {
                var nodes = nearestNodes.findClosestTo(node);
                console.log("nodes", nodes);
                console.log('closest', nodes.closest, 'nextClosest', nodes.nextClosest);
                // draw lines
                // draw line from node.xy to closest.xy
                // draw line from node.xy to nextClosest.xy
                // save drawn lines to connections in state

                (0, _drawLine2.default)(app, event, node, nodes.closest);
                (0, _drawLine2.default)(app, event, node, nodes.nextClosest);
            }
        }
    });

    return app;
}

function resizeCanvas() {
    canvas.setHeight(window.innerHeight);
    canvas.setWidth(window.innerWidth);
    canvas.renderAll();
}
// export default function canvasSetup(app) {
//     let canvas = document.getElementById('stage');
//     app.renderer = new Renderer(canvas);

//     return app;
// }

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = spawnNode;

var _utils = __webpack_require__(0);

var nodeRadius = 50;

function spawnNode(app, event) {
    var _ref = event.e.touches ? event.e.touches[0] : event.e,
        pageX = _ref.pageX,
        pageY = _ref.pageY;

    if (!event.target) {
        var offset = -20;
        var nodeID = (0, _utils.guid)();
        var centered = {
            x: pageX - nodeRadius,
            y: pageY - nodeRadius
        };
        addCircle({
            x: centered.x,
            y: centered.y,
            color: app.state.currentUser.color,
            canvas: app.canvas,
            nodeID: nodeID
        });
        var currentUser = app.state.currentUser;
        app.state.nodes.push({
            color: currentUser.color,
            coords: centered,
            userID: currentUser.userID,
            nodeID: nodeID
        });
        return {
            x: centered.x,
            y: centered.y,
            nodeID: nodeID
        };
    }
}

function addCircle(_ref2) {
    var x = _ref2.x,
        y = _ref2.y,
        color = _ref2.color,
        canvas = _ref2.canvas,
        nodeID = _ref2.nodeID;

    // console.log("x, y, color, canvas", x, y, color, canvas);
    var circle = new fabric.Circle({
        left: x,
        top: y,
        radius: nodeRadius,
        fill: color,
        hasControls: false,
        id: nodeID
    });
    canvas.add(circle);
}

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* globals Math */

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = __webpack_require__(0);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var emptyCoords = function emptyCoords() {
    return { x: null, y: null, nodeID: '' };
};
var closest = emptyCoords();
var nextClosest = emptyCoords();

var NearestNodes = function () {
    function NearestNodes(app) {
        _classCallCheck(this, NearestNodes);

        // this.app = app;
        this.nodes = app.state.nodes;
    }

    // only using getter/setter pattern in case I pass object to set coords and it has more than x/y


    _createClass(NearestNodes, [{
        key: 'findClosestTo',
        value: function findClosestTo(_ref) {
            var _this = this;

            var x = _ref.x,
                y = _ref.y,
                nodeID = _ref.nodeID;

            var coords = { x: x, y: y };
            this.nodes.forEach(function (tmpNode) {
                if (nodeID === tmpNode.nodeID) return;

                if ((0, _utils.coordsAreNull)(_this.closest)) {
                    _this.closest = Object.assign({ nodeID: tmpNode.nodeID }, tmpNode.coords);
                } else if (distance(coords, _this.closest) > distance(coords, tmpNode.coords)) {
                    _this.nextClosest = _this.closest;
                    _this.closest = Object.assign({ nodeID: tmpNode.nodeID }, tmpNode.coords);
                } else if ((0, _utils.coordsAreNull)(_this.nextClosest) || distance(coords, _this.nextClosest) > distance(coords, tmpNode.coords)) {

                    _this.nextClosest = Object.assign({ nodeID: tmpNode.nodeID }, tmpNode.coords);
                }
            });
            return {
                closest: this.closest,
                nextClosest: this.nextClosest
            };
        }
    }, {
        key: 'closest',
        get: function get() {
            return closest;
        },
        set: function set(_ref2) {
            var x = _ref2.x,
                y = _ref2.y,
                nodeID = _ref2.nodeID;

            closest.x = x;
            closest.y = y;
            closest.nodeID = nodeID;
        }
    }, {
        key: 'nextClosest',
        get: function get() {
            return nextClosest;
        },
        set: function set(_ref3) {
            var x = _ref3.x,
                y = _ref3.y,
                nodeID = _ref3.nodeID;

            nextClosest.x = x;
            nextClosest.y = y;
            nextClosest.nodeID = nodeID;
        }
    }]);

    return NearestNodes;
}();

exports.default = NearestNodes;


function distance(_ref4, _ref5) {
    var x1 = _ref4.x,
        y1 = _ref4.y;
    var x2 = _ref5.x,
        y2 = _ref5.y;

    return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));
}

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* globals console */

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = drawLine;

var _utils = __webpack_require__(0);

// Things needed to draw lines
// - color
// - start point (coords & parent circle ID)
// - end point (coords & parent circle ID)
function drawLine(app, event, startNode, endNode) {
    // TODO remove event param?
    if ((0, _utils.coordsAreNull)(endNode)) return;

    var lineColor = '#000000';
    var offset = 50;
    var coords = [startNode.x + offset, startNode.y + offset, endNode.x + offset, endNode.y + offset];

    addLine(coords, lineColor, app.canvas);
}

function addLine(coords, color, canvas) {
    var line = new fabric.Line(coords, {
        stroke: color,
        strokeWidth: 5,
        selectable: false
    });

    canvas.add(line);
    canvas.sendToBack(line);
}

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = addUser;

var _utils = __webpack_require__(0);

function addUser(app) {
    var userID = (0, _utils.guid)();
    var color = (0, _utils.randomHex)();
    app.state.users[userID] = { color: color };

    app.state.currentUser = {
        userID: userID, color: color
    };

    return app;
}

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgODM0YTY1NDA5M2M2YzI0ODg2MjUiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY2xpZW50L3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NsaWVudC9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NsaWVudC9zdGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jbGllbnQvY2FudmFzLXNldHVwLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NsaWVudC9zcGF3bi1ub2RlLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NsaWVudC9maW5kLW5lYXJlc3Qtbm9kZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY2xpZW50L2RyYXctbGluZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jbGllbnQvYWRkLXVzZXIuanMiXSwibmFtZXMiOlsiZ3VpZCIsInJhbmRvbUhleCIsImdldERpc3RhbmNlIiwiaXNOdWxsIiwiY29vcmRzQXJlTnVsbCIsInM0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJjb29yZHMxIiwiY29vcmRzMiIsInNxcnQiLCJwb3ciLCJ4IiwieSIsInZhbHVlIiwib2JqIiwiYXBwIiwic3RhdGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnJvciIsInRocm93biIsIm91dHB1dCIsInN0ciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJ3aW5kb3ciLCJnZXRTdGF0ZSIsIm5vZGVzIiwiY29ubmVjdGlvbnMiLCJ1c2VycyIsImN1cnJlbnRVc2VyIiwidXNlcklEIiwiY29sb3IiLCJjYW52YXNTZXR1cCIsImNhbnZhcyIsIm5lYXJlc3ROb2RlcyIsImZhYnJpYyIsIkNhbnZhcyIsIkdyb3VwIiwicHJvdG90eXBlIiwiaGFzQ29udHJvbHMiLCJzZWxlY3Rpb24iLCJhZGRFdmVudExpc3RlbmVyIiwicmVzaXplQ2FudmFzIiwib24iLCJub2RlIiwiZXZlbnQiLCJmaW5kQ2xvc2VzdFRvIiwiY2xvc2VzdCIsIm5leHRDbG9zZXN0Iiwic2V0SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJzZXRXaWR0aCIsImlubmVyV2lkdGgiLCJyZW5kZXJBbGwiLCJzcGF3bk5vZGUiLCJub2RlUmFkaXVzIiwiZSIsInRvdWNoZXMiLCJwYWdlWCIsInBhZ2VZIiwidGFyZ2V0Iiwib2Zmc2V0Iiwibm9kZUlEIiwiY2VudGVyZWQiLCJhZGRDaXJjbGUiLCJwdXNoIiwiY29vcmRzIiwiY2lyY2xlIiwiQ2lyY2xlIiwibGVmdCIsInRvcCIsInJhZGl1cyIsImZpbGwiLCJpZCIsImFkZCIsImVtcHR5Q29vcmRzIiwiTmVhcmVzdE5vZGVzIiwiZm9yRWFjaCIsInRtcE5vZGUiLCJPYmplY3QiLCJhc3NpZ24iLCJkaXN0YW5jZSIsIngxIiwieTEiLCJ4MiIsInkyIiwiZHJhd0xpbmUiLCJzdGFydE5vZGUiLCJlbmROb2RlIiwibGluZUNvbG9yIiwiYWRkTGluZSIsImxpbmUiLCJMaW5lIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJzZWxlY3RhYmxlIiwic2VuZFRvQmFjayIsImFkZFVzZXIiXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFz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dUIsU0FBaEIsRUFBMkJoRixJQUFJd0IsTUFBL0I7QUFDSDs7QUFFRCxTQUFTeUQsT0FBVCxDQUFpQnhCLE1BQWpCLEVBQXlCbkMsS0FBekIsRUFBZ0NFLE1BQWhDLEVBQXdDO0FBQ3BDLFFBQUkwRCxPQUFPLElBQUl4RCxPQUFPeUQsSUFBWCxDQUFnQjFCLE1BQWhCLEVBQXdCO0FBQy9CMkIsZ0JBQVE5RCxLQUR1QjtBQUUvQitELHFCQUFhLENBRmtCO0FBRy9CQyxvQkFBWTtBQUhtQixLQUF4QixDQUFYOztBQU1BOUQsV0FBT3lDLEdBQVAsQ0FBV2lCLElBQVg7QUFDQTFELFdBQU8rRCxVQUFQLENBQWtCTCxJQUFsQjtBQUNILEM7Ozs7Ozs7QUNqQ0Q7Ozs7O2tCQUl3Qk0sTzs7QUFGeEI7O0FBRWUsU0FBU0EsT0FBVCxDQUFpQnhGLEdBQWpCLEVBQXNCO0FBQ2pDLFFBQUlxQixTQUFTLGtCQUFiO0FBQ0EsUUFBSUMsUUFBUSx1QkFBWjtBQUNBdEIsUUFBSUMsS0FBSixDQUFVa0IsS0FBVixDQUFnQkUsTUFBaEIsSUFBMEIsRUFBRUMsWUFBRixFQUExQjs7QUFFQXRCLFFBQUlDLEtBQUosQ0FBVW1CLFdBQVYsR0FBd0I7QUFDcEJDLHNCQURvQixFQUNaQztBQURZLEtBQXhCOztBQUlBLFdBQU90QixHQUFQO0FBQ0gsQyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgODM0YTY1NDA5M2M2YzI0ODg2MjUiLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGd1aWQoKSB7XG4gICAgZnVuY3Rpb24gczQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxuICAgICAgICAgICAgLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgLnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgLy8gcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xuICAgIHJldHVybiBgJHtzNCgpfSR7czQoKX0tJHtzNCgpfS0ke3M0KCl9LSR7czQoKX0tJHtzNCgpfSR7czQoKX0ke3M0KCl9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbUhleCgpIHtcbiAgICByZXR1cm4gJyMnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjE2Nzc3MjE1KS50b1N0cmluZygxNik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXN0YW5jZShjb29yZHMxLCBjb29yZHMyKSB7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdygoY29vcmRzMS54IC0gY29vcmRzMi54KSwgMikgKyBNYXRoLnBvdygoY29vcmRzMS55IC0gY29vcmRzMi55KSwgMikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdWxsKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29vcmRzQXJlTnVsbChvYmopIHtcbiAgICByZXR1cm4gaXNOdWxsKG9iai54KSAmJiBpc051bGwob2JqLnkpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjcmlwdHMvY2xpZW50L3V0aWxzLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWxzIGNvbnNvbGUgKi9cblxuLy8gaW1wb3J0ICcuL3JBRi1wb2x5ZmlsbC5qcyc7XG5pbXBvcnQgc3RhdGUgZnJvbSAnLi9zdGF0ZS5qcyc7XG5pbXBvcnQgY2FudmFzU2V0dXAgZnJvbSAnLi9jYW52YXMtc2V0dXAuanMnO1xuaW1wb3J0IGFkZFVzZXIgZnJvbSAnLi9hZGQtdXNlci5qcyc7XG5cbi8vIGxldCByZW5kZXJlcjtcbmxldCBhcHAgPSB7XG4gICAgc3RhdGUsXG5cbiAgICAvLyBkcmF3KCkge1xuICAgICAgICAvLyBsZXQgdGltZTtcbiAgICAgICAgLy8gbGV0IGNvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRyb2xzJyk7XG4gICAgICAgIC8vIHRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAvLyBjb250cm9scy5pbm5lclRleHQgPSBgJHt0aW1lLmdldEhvdXJzKCl9OiR7dGltZS5nZXRNaW51dGVzKCl9OiR7dGltZS5nZXRTZWNvbmRzKCl9LiR7dGltZS5nZXRNaWxsaXNlY29uZHMoKX1gO1xuICAgICAgICBcbiAgICAgICAgLy8gLy8gdGhpcy5yZW5kZXJlci5jbGVhcigpO1xuICAgICAgICAvLyBpZiAodGhpcy5zdGF0ZS5ub2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gICAgIHRoaXMuc3RhdGUubm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgLy8gICAgICAgICAvLyBjaGVjayBpZiBub2RlLnVzZXJJRCBtYXRjaGVzIHVzZXJJRFxuICAgICAgICAvLyAgICAgICAgIC8vIGlmIHNvLCB1c2UgY29vcmRzIGZvciBjaXJjbGU7IGdldCBub2RlIGNvbG9yIGZyb20gc3RhdGUudXNlclt1c2VySURdLmNvbG9yXG4gICAgICAgIC8vICAgICB9KVxuICAgICAgICAvLyB9XG4gICAgLy8gfSxcbn07XG5cblByb21pc2UucmVzb2x2ZShhcHApXG4gICAgLnRoZW4oYWRkVXNlcilcbiAgICAudGhlbihjYW52YXNTZXR1cClcbiAgICAvLyAudGhlbigoKSA9PiBhbmltYXRlKCkpXG4gICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coXCJzdGF0ZVwiLCBzdGF0ZSkpXG4gICAgLmNhdGNoKHRocm93biA9PiBjb25zb2xlLmVycm9yKCclY0FuIGVycm9yIG9jY3VycmVkOicsICdmb250LXdlaWdodDpib2xkJywgdGhyb3duKSlcbjtcblxuLy8gZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbi8vICAgICBhcHAuZHJhdygpO1xuLy8gICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbi8vIH1cbmZ1bmN0aW9uIG91dHB1dChzdHIpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0JykuaW5uZXJIVE1MICs9IGA8YnI+JHtzdHJ9YDtcbn1cbndpbmRvdy5nZXRTdGF0ZSA9ICgpID0+IGNvbnNvbGUubG9nKCdhcHAuc3RhdGUnLCBhcHAuc3RhdGUpO1xuLypcblRPRE86IGdldCB0b3VjaC1hZGQgd29ya2luZ1xuLS0gY3JlYXRlIG5vZGUgdXNpbmcgdXNlcidzIGNvbG9yXG4tLSBzYXZlIG5vZGUgaW5mbyB0byBub2RlcyBhcnJheVxuVE9ETzogc2hhcmUgc3RhdGUgb3ZlciB3ZWJzb2NrZXRzXG5UT0RPOiB1cGRhdGUgc3RhdGUgb2JqZWN0IHdoZW4gc29ja2V0IGluZm8gY29tZXMgaW5cbiAqL1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjcmlwdHMvY2xpZW50L21haW4uanMiLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gVGhlIFRydXRoIVxuZXhwb3J0IGRlZmF1bHQge1xuICAgIG5vZGVzOiBbXSxcbiAgICBjb25uZWN0aW9uczogW10sXG4gICAgdXNlcnM6IHt9LFxuICAgIGN1cnJlbnRVc2VyOiB7XG4gICAgICAgIHVzZXJJRDogJycsXG4gICAgICAgIGNvbG9yOiAnJ1xuICAgIH1cbn07XG5cbi8qXG5lLmcuIFxue1xuICAgIG5vZGVzOiBbe1xuICAgICAgICB1c2VySUQ6ICdndWlkJyxcbiAgICAgICAgY29vcmRzOiBbeyB4OjAsIHk6MCB9XSxcbiAgICAgICAgbm9kZUlEOiAnZ3VpZCdcbiAgICB9XSxcbiAgICBjb25uZWN0aW9uczogW3tcbiAgICAgICAgZTE6IHsgeDowLCB5OjAgfSxcbiAgICAgICAgZTI6IHsgeDowLCB5OjAgfSxcbiAgICB9XSxcbiAgICB1c2Vyczoge1xuICAgICAgICBndWlkOiB7XG4gICAgICAgICAgICBjb2xvcjogJydcbiAgICAgICAgfVxuICAgIH1cbn1cbiAqL1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjcmlwdHMvY2xpZW50L3N0YXRlLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiAgKi9cbmltcG9ydCBzcGF3bk5vZGUgZnJvbSAnLi9zcGF3bi1ub2RlLmpzJztcbmltcG9ydCBOZWFyZXN0Tm9kZXMgZnJvbSAnLi9maW5kLW5lYXJlc3Qtbm9kZXMuanMnO1xuaW1wb3J0IGRyYXdMaW5lIGZyb20gJy4vZHJhdy1saW5lLmpzJztcblxubGV0IGNhbnZhcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY2FudmFzU2V0dXAoYXBwKSB7XG4gICAgY29uc3QgbmVhcmVzdE5vZGVzID0gbmV3IE5lYXJlc3ROb2RlcyhhcHApO1xuICAgIGNhbnZhcyA9IG5ldyBmYWJyaWMuQ2FudmFzKCdzdGFnZScpO1xuXG4gICAgZmFicmljLkdyb3VwLnByb3RvdHlwZS5oYXNDb250cm9scyA9IGZhbHNlO1xuICAgIGNhbnZhcy5zZWxlY3Rpb24gPSBmYWxzZTtcbiAgICBcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplQ2FudmFzLCBmYWxzZSk7XG4gICAgcmVzaXplQ2FudmFzKCk7XG4gICAgYXBwLnJlc2l6ZUNhbnZhcyA9IHJlc2l6ZUNhbnZhcztcbiAgICBhcHAuY2FudmFzID0gY2FudmFzO1xuXG4gICAgY2FudmFzLm9uKHtcbiAgICAgICAgJ21vdXNlOmRvd24nOiBldmVudCA9PiB7XG4gICAgICAgICAgICBsZXQgbm9kZSA9IHNwYXduTm9kZShhcHAsIGV2ZW50KTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5vZGVzID0gbmVhcmVzdE5vZGVzLmZpbmRDbG9zZXN0VG8obm9kZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJub2Rlc1wiLCBub2Rlcyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgICdjbG9zZXN0Jywgbm9kZXMuY2xvc2VzdCxcbiAgICAgICAgICAgICAgICAgICAgJ25leHRDbG9zZXN0Jywgbm9kZXMubmV4dENsb3Nlc3RcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIC8vIGRyYXcgbGluZXNcbiAgICAgICAgICAgICAgICAvLyBkcmF3IGxpbmUgZnJvbSBub2RlLnh5IHRvIGNsb3Nlc3QueHlcbiAgICAgICAgICAgICAgICAvLyBkcmF3IGxpbmUgZnJvbSBub2RlLnh5IHRvIG5leHRDbG9zZXN0Lnh5XG4gICAgICAgICAgICAgICAgLy8gc2F2ZSBkcmF3biBsaW5lcyB0byBjb25uZWN0aW9ucyBpbiBzdGF0ZVxuXG4gICAgICAgICAgICAgICAgZHJhd0xpbmUoYXBwLCBldmVudCwgbm9kZSwgbm9kZXMuY2xvc2VzdCk7XG4gICAgICAgICAgICAgICAgZHJhd0xpbmUoYXBwLCBldmVudCwgbm9kZSwgbm9kZXMubmV4dENsb3Nlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYXBwO1xufVxuXG5mdW5jdGlvbiByZXNpemVDYW52YXMoKSB7XG4gICAgY2FudmFzLnNldEhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgIGNhbnZhcy5zZXRXaWR0aCh3aW5kb3cuaW5uZXJXaWR0aCk7XG4gICAgY2FudmFzLnJlbmRlckFsbCgpO1xufVxuLy8gZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY2FudmFzU2V0dXAoYXBwKSB7XG4vLyAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFnZScpO1xuLy8gICAgIGFwcC5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcihjYW52YXMpO1xuXG4vLyAgICAgcmV0dXJuIGFwcDtcbi8vIH1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zY3JpcHRzL2NsaWVudC9jYW52YXMtc2V0dXAuanMiLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgZ3VpZCB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG5jb25zdCBub2RlUmFkaXVzID0gNTA7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNwYXduTm9kZShhcHAsIGV2ZW50KSB7XG4gICAgbGV0IHsgcGFnZVgsIHBhZ2VZIH0gPSBldmVudC5lLnRvdWNoZXMgPyBldmVudC5lLnRvdWNoZXNbMF0gOiBldmVudC5lO1xuICAgIGlmICghZXZlbnQudGFyZ2V0KSB7XG4gICAgICAgIGxldCBvZmZzZXQgPSAtMjA7XG4gICAgICAgIGxldCBub2RlSUQgPSBndWlkKCk7XG4gICAgICAgIGxldCBjZW50ZXJlZCA9IHtcbiAgICAgICAgICAgIHg6IChwYWdlWCAtIG5vZGVSYWRpdXMpLFxuICAgICAgICAgICAgeTogKHBhZ2VZIC0gbm9kZVJhZGl1cyksXG4gICAgICAgIH07XG4gICAgICAgIGFkZENpcmNsZSh7XG4gICAgICAgICAgICB4OiBjZW50ZXJlZC54LFxuICAgICAgICAgICAgeTogY2VudGVyZWQueSxcbiAgICAgICAgICAgIGNvbG9yOiBhcHAuc3RhdGUuY3VycmVudFVzZXIuY29sb3IsXG4gICAgICAgICAgICBjYW52YXM6IGFwcC5jYW52YXMsXG4gICAgICAgICAgICBub2RlSURcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBjdXJyZW50VXNlciA9IGFwcC5zdGF0ZS5jdXJyZW50VXNlcjtcbiAgICAgICAgYXBwLnN0YXRlLm5vZGVzLnB1c2goe1xuICAgICAgICAgICAgY29sb3I6IGN1cnJlbnRVc2VyLmNvbG9yLFxuICAgICAgICAgICAgY29vcmRzOiBjZW50ZXJlZCxcbiAgICAgICAgICAgIHVzZXJJRDogY3VycmVudFVzZXIudXNlcklELFxuICAgICAgICAgICAgbm9kZUlEXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogY2VudGVyZWQueCxcbiAgICAgICAgICAgIHk6IGNlbnRlcmVkLnksXG4gICAgICAgICAgICBub2RlSURcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZENpcmNsZSh7eCwgeSwgY29sb3IsIGNhbnZhcywgbm9kZUlEfSkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwieCwgeSwgY29sb3IsIGNhbnZhc1wiLCB4LCB5LCBjb2xvciwgY2FudmFzKTtcbiAgICBsZXQgY2lyY2xlID0gbmV3IGZhYnJpYy5DaXJjbGUoe1xuICAgICAgICBsZWZ0OiB4LFxuICAgICAgICB0b3A6IHksXG4gICAgICAgIHJhZGl1czogbm9kZVJhZGl1cyxcbiAgICAgICAgZmlsbDogY29sb3IsXG4gICAgICAgIGhhc0NvbnRyb2xzOiBmYWxzZSxcbiAgICAgICAgaWQ6IG5vZGVJRFxuICAgIH0pO1xuICAgIGNhbnZhcy5hZGQoY2lyY2xlKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zY3JpcHRzL2NsaWVudC9zcGF3bi1ub2RlLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiBnbG9iYWxzIE1hdGggKi9cblxuaW1wb3J0IHsgY29vcmRzQXJlTnVsbCB9IGZyb20gJy4vdXRpbHMuanMnO1xuXG5jb25zdCBlbXB0eUNvb3JkcyA9ICgpID0+IHsgcmV0dXJuIHsgeDpudWxsLCB5Om51bGwsIG5vZGVJRDonJyB9OyB9O1xubGV0IGNsb3Nlc3QgPSBlbXB0eUNvb3JkcygpO1xubGV0IG5leHRDbG9zZXN0ID0gZW1wdHlDb29yZHMoKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmVhcmVzdE5vZGVzIHtcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgLy8gdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMubm9kZXMgPSBhcHAuc3RhdGUubm9kZXM7XG4gICAgfVxuXG4gICAgLy8gb25seSB1c2luZyBnZXR0ZXIvc2V0dGVyIHBhdHRlcm4gaW4gY2FzZSBJIHBhc3Mgb2JqZWN0IHRvIHNldCBjb29yZHMgYW5kIGl0IGhhcyBtb3JlIHRoYW4geC95XG4gICAgZ2V0IGNsb3Nlc3QoKSB7XG4gICAgICAgIHJldHVybiBjbG9zZXN0O1xuICAgIH1cbiAgICBzZXQgY2xvc2VzdCh7eCwgeSwgbm9kZUlEfSkge1xuICAgICAgICBjbG9zZXN0LnggPSB4O1xuICAgICAgICBjbG9zZXN0LnkgPSB5O1xuICAgICAgICBjbG9zZXN0Lm5vZGVJRCA9IG5vZGVJRDtcbiAgICB9XG4gICAgZ2V0IG5leHRDbG9zZXN0KCkge1xuICAgICAgICByZXR1cm4gbmV4dENsb3Nlc3Q7XG4gICAgfVxuICAgIHNldCBuZXh0Q2xvc2VzdCh7eCwgeSwgbm9kZUlEfSkge1xuICAgICAgICBuZXh0Q2xvc2VzdC54ID0geDtcbiAgICAgICAgbmV4dENsb3Nlc3QueSA9IHk7XG4gICAgICAgIG5leHRDbG9zZXN0Lm5vZGVJRCA9IG5vZGVJRDtcbiAgICB9XG5cbiAgICBmaW5kQ2xvc2VzdFRvKHt4LCB5LCBub2RlSUR9KSB7XG4gICAgICAgIGxldCBjb29yZHMgPSB7IHgsIHkgfTtcbiAgICAgICAgdGhpcy5ub2Rlcy5mb3JFYWNoKHRtcE5vZGUgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGVJRCA9PT0gdG1wTm9kZS5ub2RlSUQpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKGNvb3Jkc0FyZU51bGwodGhpcy5jbG9zZXN0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VzdCA9IE9iamVjdC5hc3NpZ24oeyBub2RlSUQ6IHRtcE5vZGUubm9kZUlEIH0sIHRtcE5vZGUuY29vcmRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlzdGFuY2UoY29vcmRzLCB0aGlzLmNsb3Nlc3QpID4gZGlzdGFuY2UoY29vcmRzLCB0bXBOb2RlLmNvb3JkcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2xvc2VzdCA9IHRoaXMuY2xvc2VzdDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZXN0ID0gT2JqZWN0LmFzc2lnbih7IG5vZGVJRDogdG1wTm9kZS5ub2RlSUQgfSwgdG1wTm9kZS5jb29yZHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjb29yZHNBcmVOdWxsKHRoaXMubmV4dENsb3Nlc3QpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZShjb29yZHMsIHRoaXMubmV4dENsb3Nlc3QpID4gZGlzdGFuY2UoY29vcmRzLCB0bXBOb2RlLmNvb3JkcykpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMubmV4dENsb3Nlc3QgPSBPYmplY3QuYXNzaWduKHsgbm9kZUlEOiB0bXBOb2RlLm5vZGVJRCB9LCB0bXBOb2RlLmNvb3Jkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xvc2VzdDogdGhpcy5jbG9zZXN0LFxuICAgICAgICAgICAgbmV4dENsb3Nlc3Q6IHRoaXMubmV4dENsb3Nlc3QsXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXN0YW5jZSh7eDp4MSwgeTp5MX0sIHt4OngyLCB5OnkyfSkge1xuICAgIHJldHVybiBNYXRoLnNxcnQoXG4gICAgICAgIE1hdGgucG93KCh4MSAtIHgyKSwgMikgKyBNYXRoLnBvdygoeTEgLSB5MiksIDIpXG4gICAgKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zY3JpcHRzL2NsaWVudC9maW5kLW5lYXJlc3Qtbm9kZXMuanMiLCJcInVzZSBzdHJpY3RcIjtcbi8qIGdsb2JhbHMgY29uc29sZSAqL1xuXG5pbXBvcnQgeyBjb29yZHNBcmVOdWxsIH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbi8vIFRoaW5ncyBuZWVkZWQgdG8gZHJhdyBsaW5lc1xuLy8gLSBjb2xvclxuLy8gLSBzdGFydCBwb2ludCAoY29vcmRzICYgcGFyZW50IGNpcmNsZSBJRClcbi8vIC0gZW5kIHBvaW50IChjb29yZHMgJiBwYXJlbnQgY2lyY2xlIElEKVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZHJhd0xpbmUoYXBwLCBldmVudCwgc3RhcnROb2RlLCBlbmROb2RlKSB7IC8vIFRPRE8gcmVtb3ZlIGV2ZW50IHBhcmFtP1xuICAgIGlmIChjb29yZHNBcmVOdWxsKGVuZE5vZGUpKSByZXR1cm47XG5cbiAgICBsZXQgbGluZUNvbG9yID0gJyMwMDAwMDAnO1xuICAgIGxldCBvZmZzZXQgPSA1MDtcbiAgICBsZXQgY29vcmRzID0gW1xuICAgICAgICAoc3RhcnROb2RlLnggKyBvZmZzZXQpLFxuICAgICAgICAoc3RhcnROb2RlLnkgKyBvZmZzZXQpLFxuICAgICAgICAoZW5kTm9kZS54ICsgb2Zmc2V0KSxcbiAgICAgICAgKGVuZE5vZGUueSArIG9mZnNldCksXG4gICAgXTtcblxuICAgIGFkZExpbmUoY29vcmRzLCBsaW5lQ29sb3IsIGFwcC5jYW52YXMpO1xufVxuXG5mdW5jdGlvbiBhZGRMaW5lKGNvb3JkcywgY29sb3IsIGNhbnZhcykge1xuICAgIGxldCBsaW5lID0gbmV3IGZhYnJpYy5MaW5lKGNvb3Jkcywge1xuICAgICAgICBzdHJva2U6IGNvbG9yLFxuICAgICAgICBzdHJva2VXaWR0aDogNSxcbiAgICAgICAgc2VsZWN0YWJsZTogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBjYW52YXMuYWRkKGxpbmUpO1xuICAgIGNhbnZhcy5zZW5kVG9CYWNrKGxpbmUpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjcmlwdHMvY2xpZW50L2RyYXctbGluZS5qcyIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBndWlkLCByYW5kb21IZXggfSBmcm9tICcuL3V0aWxzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkVXNlcihhcHApIHtcbiAgICBsZXQgdXNlcklEID0gZ3VpZCgpO1xuICAgIGxldCBjb2xvciA9IHJhbmRvbUhleCgpO1xuICAgIGFwcC5zdGF0ZS51c2Vyc1t1c2VySURdID0geyBjb2xvciB9O1xuXG4gICAgYXBwLnN0YXRlLmN1cnJlbnRVc2VyID0ge1xuICAgICAgICB1c2VySUQsIGNvbG9yXG4gICAgfTtcblxuICAgIHJldHVybiBhcHA7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NjcmlwdHMvY2xpZW50L2FkZC11c2VyLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==